<article
    class="group relative bg-white rounded-[2.5rem] shadow-premium hover:shadow-[0_40px_80px_-15px_rgba(15,23,42,0.15)] transition-all duration-700 overflow-hidden border border-[#17255421] hover:-translate-y-2 h-full flex flex-col"
    (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
    <a [routerLink]="['/shop/product', product.id]"
        class="block focus:outline-none focus:ring-4 focus:ring-blue-100 rounded-[2.5rem] flex-grow">
        <div class="relative h-[250px] bg-slate-50 overflow-hidden">
            <!-- Main Product Image -->
            <img [src]="product.image || 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?auto=format&fit=crop&w=800&q=80'"
                class="w-full h-full object-cover transition-all duration-1000" [class.scale-110]="isHovered"
                [class.blur-[1px]]="isHovered" [alt]="product.name" title="{{ product.name }} - صورة المنتج" />

            <!-- Hover Overlay Actions -->
            <div class="absolute inset-0 bg-blue-950/20 backdrop-blur-[2px] flex items-center justify-center gap-4 transition-all duration-500"
                [class.opacity-100]="isHovered" [class.opacity-0]="!isHovered">
                <button
                    class="h-12 w-12 glass rounded-full flex items-center justify-center text-blue-900 hover:bg-blue-700 hover:text-white transition-all transform hover:scale-110 shadow-xl"
                    aria-label="إضافة إلى السلة">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                        <path d="M3 6h18"></path>
                        <path d="M16 10a4 4 0 0 1-8 0"></path>
                    </svg>
                </button>
                <button
                    class="h-12 w-12 glass rounded-full flex items-center justify-center text-blue-900 hover:bg-white transition-all transform hover:scale-110 shadow-xl"
                    aria-label="عرض التفاصيل">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="19" y1="12" x2="5" y2="12"></line>
                        <polyline points="12 19 5 12 12 5"></polyline>
                    </svg>
                </button>
            </div>

            <!-- Category Badge -->
            <div class="absolute top-6 right-6">
                <span
                    class="glass px-4 py-2 rounded-full text-sm font-black uppercase tracking-widest text-blue-900 shadow-sm">
                    {{ product.category }}
                </span>
            </div>
        </div>

        <!-- Product Info -->
        <div class="p-6 space-y-4 text-right">
            <div class="flex items-center justify-between flex-row-reverse">
                <div class="flex flex-col text-right">
                    <span class="text-sm font-bold text-slate-400 uppercase tracking-widest">سعر الجملة</span>
                    <span class="text-3xl font-black text-[#2650fc] tracking-tighter">{{ (displayPrice *
                        50).toLocaleString() }} ج.م</span>
                </div>
                <div class="flex items-center gap-1.5 bg-yellow-50 px-3 py-1.5 rounded-full border border-yellow-100">
                    <span class="text-sm font-black text-yellow-700">{{ product.rating }}</span>
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="text-yellow-500">
                        <polygon
                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                        </polygon>
                    </svg>
                </div>
            </div>

            <h3
                class="text-xl font-black text-blue-950 line-clamp-2 leading-tight group-hover:text-blue-700 transition-colors duration-300">
                {{ product.name }}
            </h3>

            <div class="pt-4 border-t border-slate-50">
                <div class="flex items-center justify-end gap-2 mb-4">
                    <span class="text-sm font-black text-slate-600">متوفر من {{ product.suppliers.length }}
                        موردين</span>
                    <span class="text-sm font-black text-slate-400">|</span>
                    <span
                        class="bg-[#2650fc]/10 text-[#2650fc] text-xs font-black px-2.5 py-1 rounded-lg border border-brand/20">الحد
                        الأدنى: 5 قطع</span>
                </div>

                <div class="flex flex-row-reverse gap-2 overflow-x-auto pb-2">
                    <div *ngFor="let supplier of product.suppliers" class="group/supplier relative flex-shrink-0">
                        <div
                            class="h-10 w-10 rounded-xl overflow-hidden border-2 border-white shadow-sm group-hover/supplier:border-brand/40 transition-all duration-300">
                            <img [src]="supplier.image" [alt]="'مورد: ' + supplier.name"
                                title="مورد: {{ supplier.name }}" class="h-full w-full object-cover" loading="lazy" />
                        </div>
                        <!-- Tooltip simulation could be added here if needed -->
                    </div>
                </div>

                <button
                    class="mt-6 w-full py-4 bg-[#2650fc] text-white font-black rounded-2xl hover:bg-brand-dark transition-all uppercase text-sm tracking-widest shadow-lg shadow-brand/20">
                    أضف للطلب
                </button>
            </div>
        </div>
    </a>
</article>