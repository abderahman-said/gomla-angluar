// Custom Purple Theme for Angular Material
@use '@angular/material' as mat;
@use 'sass:map';

// Define purple color palette (M3 compatible 0-100 tones)
// Primary palette based on #8b5cf6
// Define purple color palette (M3 compatible 0-100 tones)
// We use built-in palettes as bases to ensure all required M3 keys (secondary, neutral, error, etc.) are present
$purple-primary: map.merge(mat.$violet-palette, (0: #000000,
            10: #21005d,
            20: #381e72,
            25: #442b81,
            30: #50378f,
            35: #5c449e,
            40: #6750a4,
            50: #7f67be,
            60: #9a82db,
            70: #b69df8,
            80: #d0bcff,
            90: #eaddff,
            95: #f6edff,
            98: #fff7ff,
            99: #fffbff,
            100: #ffffff,
        ));

// Tertiary palette based on #64748b, using blue-palette as base
$purple-tertiary: map.merge(mat.$blue-palette, (0: #000000,
            10: #001f28,
            20: #003544,
            25: #004153,
            30: #004d62,
            35: #005971,
            40: #006681,
            50: #2380a0,
            60: #469ab9,
            70: #64b5d4,
            80: #81d1f1,
            90: #bde9ff,
            95: #e0f4ff,
            98: #f6fbff,
            99: #fdfbff,
            100: #ffffff,
        ));

// Define the theme
$purple-theme: mat.define-theme((color: (theme-type: light,
                primary: $purple-primary,
                tertiary: $purple-tertiary,
            ),
            typography: (brand-family: 'Inter, sans-serif',
                plain-family: 'Inter, sans-serif',
            ),
            density: (scale: 0,
            )));

// Mixin to apply the theme
@mixin purple-theme {
    @include mat.all-component-themes($purple-theme);

    // Custom overrides for Material components
    .mat-mdc-form-field {
        .mat-mdc-form-field-flex {
            .mat-mdc-form-field-outline {

                .mdc-notched-outline__leading,
                .mdc-notched-outline__notch,
                .mdc-notched-outline__trailing {
                    border-color: #e2e8f0;
                    border-width: 2px;
                }
            }

            &.mdc-text-field--focused {
                .mat-mdc-form-field-outline {

                    .mdc-notched-outline__leading,
                    .mdc-notched-outline__notch,
                    .mdc-notched-outline__trailing {
                        border-color: #8b5cf6;
                        border-width: 2px;
                    }
                }
            }

            &.mdc-text-field--hover {
                .mat-mdc-form-field-outline {

                    .mdc-notched-outline__leading,
                    .mdc-notched-outline__notch,
                    .mdc-notched-outline__trailing {
                        border-color: #cbd5e1;
                    }
                }
            }
        }

        .mat-mdc-form-field-label {
            color: #64748b;
            font-weight: 600;

            &.mdc-floating-label {
                &.mdc-floating-label--focused {
                    color: #8b5cf6;
                }
            }
        }

        .mat-mdc-input-element {
            font-size: 1.125rem;
            font-weight: 500;
            color: #1e293b;
        }
    }

    // Date picker customizations
    .mat-mdc-datepicker-content {
        .mat-calendar {
            .mat-calendar-body-cell {
                &.mat-calendar-body-selected {
                    background-color: #8b5cf6;
                    color: white;
                }

                &.mat-calendar-body-today:not(.mat-calendar-body-selected) {
                    border-color: #8b5cf6;
                }

                &:hover {
                    background-color: #ede9fe;
                }
            }

            .mat-calendar-header {
                .mat-calendar-period-button {
                    color: #1e293b;
                    font-weight: 600;
                }
            }
        }
    }

    // Select dropdown customizations
    .mat-mdc-select-panel {
        .mat-mdc-option {
            &.mat-mdc-option-selected {
                background-color: #ede9fe;
                color: #5b21b6;
            }

            &:hover {
                background-color: #f8fafc;
            }
        }
    }

    // Checkbox customizations
    .mat-mdc-checkbox {
        .mdc-form-field {
            .mdc-checkbox__native-control:checked~.mdc-checkbox__background {
                border-color: #8b5cf6;
                background-color: #8b5cf6;
            }

            .mdc-checkbox__native-control:focus~.mdc-checkbox__background {
                border-color: #8b5cf6;
            }
        }
    }

    // Button customizations
    .mat-mdc-raised-button {
        &.mat-primary {
            background: linear-gradient(to right, #8b5cf6, #7c3aed);

            &:hover {
                background: linear-gradient(to right, #7c3aed, #6d28d9);
            }
        }
    }

    .mat-mdc-stroked-button {
        &.mat-primary {
            border-color: #8b5cf6;
            color: #8b5cf6;

            &:hover {
                background-color: #ede9fe;
            }
        }
    }
}