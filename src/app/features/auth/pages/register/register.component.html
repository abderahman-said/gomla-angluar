<div class="min-h-screen bg-mesh flex items-center justify-center py-20 px-4" >
    <div
        class="max-w-xl w-full glass rounded-[3rem] shadow-premium border border-white/50 overflow-hidden relative group">
        <!-- Decorative Elements -->
        <div class="absolute -top-24 -right-24 h-48 w-48 bg-blue-600/10 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-24 -left-24 h-48 w-48 bg-yellow-400/10 rounded-full blur-3xl"></div>

        <div class="p-10 sm:p-14 relative z-10">
            <div class="text-center mb-12">
                <img src="/logo.png" alt="بالجملة"
                    class="h-20 w-auto mx-auto mb-6 transform hover:scale-110 transition-transform duration-500 rounded-2xl">

                <h2 class="text-4xl font-black text-blue-950 uppercase tracking-tighter mb-4 leading-tight">
                    ارتقِ <br />
                    <span class="text-brand">بتجارتك</span>
                </h2>
                <p class="text-slate-500 font-bold">
                    انضم إلى شبكة بالجملة لنخبة مستوردي الأجهزة المنزلية.
                </p>
            </div>

            <!-- Step 1: Intro -->
            <div *ngIf="step() === 1" class="space-y-8 animate-slideInUp">
                <div class="grid grid-cols-1 gap-6">
                    <div
                        class="p-6 glass border-white/50 rounded-3xl hover:border-brand/30 transition-all duration-500 group shadow-sm">
                        <div class="flex items-center gap-5">
                            <div
                                class="h-14 w-14 bg-brand/10 rounded-2xl flex items-center justify-center text-brand group-hover:bg-brand group-hover:text-white transition-all duration-500 shadow-inner">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2.5">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-black text-blue-900 leading-tight">حالة مورد معتمد</h3>
                                <p class="text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1">الوصول
                                    إلى أكثر من 5000 تاجر</p>
                            </div>
                        </div>
                    </div>
                    <div
                        class="p-6 glass border-white/50 rounded-3xl hover:border-brand/30 transition-all duration-500 group shadow-sm">
                        <div class="flex items-center gap-5">
                            <div
                                class="h-14 w-14 bg-brand/10 rounded-2xl flex items-center justify-center text-brand group-hover:bg-brand group-hover:text-white transition-all duration-500 shadow-inner">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2.5">
                                    <path d="m13 2-2 10h8l-9 10 2-10H5l9-10z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-black text-blue-900 leading-tight">أدوات إدارة متقدمة</h3>
                                <p class="text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1">تتبع
                                    المخزون والطلبات في الوقت الفعلي</p>
                            </div>
                        </div>
                    </div>
                </div>
                <button (click)="setStep(2)"
                    class="w-full h-16 bg-brand text-white text-base font-black uppercase tracking-widest rounded-2xl shadow-xl shadow-brand/20 hover:bg-brand-dark hover:-translate-y-1 transition-all active:scale-95">
                    ابدأ طلب الانضمام
                </button>
            </div>

            <!-- Step 2: Form -->
            <form *ngIf="step() === 2" [formGroup]="registerForm" (ngSubmit)="handleSubmit()"
                class="space-y-6 animate-slideInUp">
                <div *ngIf="error()"
                    class="p-4 bg-red-50 border border-red-100 text-red-600 rounded-2xl text-sm font-bold text-center">
                    {{ error() }}
                </div>

                <div class="space-y-5">
                    <div class="group">
                        <label
                            class="block text-[10px] font-black text-blue-900 uppercase tracking-widest mb-2 mr-2">اسم
                            المنشأة / الشركة</label>
                        <input type="text" formControlName="companyName"
                            class="w-full h-14 px-6 rounded-2xl border border-slate-100 bg-slate-50/50 focus:ring-4 focus:ring-brand/10 focus:border-brand/50 outline-none transition-all font-bold text-blue-950 placeholder:text-slate-300"
                            placeholder="مثال: شركة النور للإلكترونيات" title="اسم الشركة">
                    </div>

                    <div class="group">
                        <label
                            class="block text-[10px] font-black text-blue-900 uppercase tracking-widest mb-2 mr-2">رقم
                            الواتساب للتواصل</label>
                        <input type="tel" formControlName="whatsapp"
                            class="w-full h-14 px-6 rounded-2xl border border-slate-100 bg-slate-50/50 focus:ring-4 focus:ring-brand/10 focus:border-brand/50 outline-none transition-all font-bold text-blue-950 placeholder:text-slate-300"
                            placeholder="01xxxxxxxxx" title="رقم الواتساب">
                    </div>

                    <div class="group relative">
                        <label
                            class="block text-[10px] font-black text-blue-900 uppercase tracking-widest mb-2 mr-2">التخصص
                            الأساسي</label>
                        <select formControlName="category"
                            class="w-full h-14 px-6 rounded-2xl border border-slate-100 bg-slate-50/50 focus:ring-4 focus:ring-brand/10 focus:border-brand/50 outline-none transition-all font-bold text-blue-950 appearance-none cursor-pointer"
                            title="التخصص">
                            <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
                        </select>
                        <div class="absolute left-6 top-[3.25rem] pointer-events-none text-slate-400">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.5">
                                <path d="m6 9 6 6 6-6"></path>
                            </svg>
                        </div>
                    </div>

                    <div class="group">
                        <label
                            class="block text-[10px] font-black text-blue-900 uppercase tracking-widest mb-2 mr-2">البريد
                            الإلكتروني</label>
                        <input type="email" formControlName="contactEmail"
                            class="w-full h-14 px-6 rounded-2xl border border-slate-100 bg-slate-50/50 focus:ring-4 focus:ring-brand/10 focus:border-brand/50 outline-none transition-all font-bold text-blue-950 placeholder:text-slate-300"
                            placeholder="contact@company.com" title="البريد الإلكتروني">
                    </div>

                    <div class="group">
                        <label
                            class="block text-[10px] font-black text-blue-900 uppercase tracking-widest mb-2 mr-2">كلمة
                            المرور</label>
                        <input type="password" formControlName="password"
                            class="w-full h-14 px-6 rounded-2xl border border-slate-100 bg-slate-50/50 focus:ring-4 focus:ring-brand/10 focus:border-brand/50 outline-none transition-all font-bold text-blue-950 placeholder:text-slate-300"
                            placeholder="••••••••" title="كلمة المرور">
                    </div>
                </div>

                <button type="submit" [disabled]="isLoading()"
                    class="w-full h-16 bg-brand text-white text-base font-black uppercase tracking-widest rounded-2xl shadow-xl shadow-brand/20 hover:bg-brand-dark hover:-translate-y-1 transition-all active:scale-95 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed">
                    <span *ngIf="!isLoading()">إرسال طلب التحقق</span>
                    <span *ngIf="isLoading()" class="flex gap-1">
                        <span class="w-2 h-2 bg-white rounded-full animate-bounce"></span>
                        <span class="w-2 h-2 bg-white rounded-full animate-bounce [animation-delay:0.2s]"></span>
                        <span class="w-2 h-2 bg-white rounded-full animate-bounce [animation-delay:0.4s]"></span>
                    </span>
                    <svg *ngIf="!isLoading()" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
                        class="rotate-180">
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                        <polyline points="12 5 19 12 12 19"></polyline>
                    </svg>
                </button>
            </form>

            <!-- Step 3: Success -->
            <div *ngIf="step() === 3" class="text-center space-y-10 animate-slideInUp">
                <div
                    class="mx-auto h-24 w-24 bg-brand/10 rounded-[2.5rem] flex items-center justify-center text-brand shadow-inner">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                </div>
                <div class="space-y-4">
                    <h3 class="text-3xl font-black text-blue-950 tracking-tighter">تم استلام طلبك!</h3>
                    <p class="text-slate-500 font-bold leading-relaxed">
                        سيقوم فريقنا بمراجعة بياناتك والتواصل معك عبر <span class="text-brand">الواتساب</span> خلال 24
                        ساعة لتفعيل حسابك.
                    </p>
                </div>
                <a routerLink="/dashboard"
                    class="inline-block w-full h-16 bg-brand text-white flex items-center justify-center rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-brand-dark transition-all shadow-lg shadow-brand/20">
                    الذهاب للوحة التحكم
                </a>
            </div>
        </div>
    </div>
</div>